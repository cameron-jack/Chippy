<?xml version="1.0" ?>
<tool id="add_expression_db" name="add expression db" version="0.2">
	<description>
		Adds an expression study to a ChippyDB
	</description>
	<requirements>
		<requirement type="package">
			qiime
		</requirement>
	</requirements>
	<command>
		add_expression_db.py --db_path=$db_path -e $expression_data --sample_type=$sample_type
#if $allow_probeset_many_gene:
 --allow_probeset_many_gene
#end if

#if str($gene_id_heading):
 --gene_id_heading=$gene_id_heading
#end if

#if str($probeset_heading):
 --probeset_heading=$probeset_heading
#end if

#if str($expression_heading):
 --expression_heading=$expression_heading
#end if

#if str($reffile1):
 --reffile1=$reffile1
#end if

#if str($reffile2):
 --reffile2=$reffile2
#end if

#if $test_run:
 -t
#end if

	</command>
	<inputs>
		<param label="Path to ChippyDB" name="db_path" optional="False" type="data"/>
		<param label="Path to the expression/gene data file. Must be tab delimited." name="expression_data" optional="False" type="text"/>
		<param label="Select the type of data you want entered from target_genes exp_absolute exp_diff" name="sample_type" optional="False" type="select">
			<option value="target_genes">
				target_genes
			</option>
			<option value="exp_absolute">
				exp_absolute
			</option>
			<option value="exp_diff">
				exp_diff
			</option>
		</param>
		<param label="Allow probesets that map to multiple genes" name="allow_probeset_many_gene" selected="False" type="boolean"/>
		<param default="gene" label="Column containing the Ensembl gene stable ID" name="gene_id_heading" optional="True" type="text"/>
		<param default="probeset" label="Column containing the probeset IDs" name="probeset_heading" optional="True" type="text"/>
		<param default="exp" label="Column containing the expression scores" name="expression_heading" optional="True" type="text"/>
		<param default="None" label="Related file 1" name="reffile1" optional="True" type="text"/>
		<param default="None" label="Related file 2" name="reffile2" optional="True" type="text"/>
		<param label="Test run, don't write output" name="test_run" selected="False" type="boolean"/>
	</inputs>
	<outputs/>
	<help>
		Add an expression study or a differential expression study from a tab delimited file, or load an ENSEMBL gene list as target genes.
	</help>
</tool>
